(()=>{var e={};e.id=138,e.ids=[138],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},75706:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d}),n(17981),n(27584),n(35866);var r=n(23191),o=n(88716),a=n(37922),i=n.n(a),s=n(95231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);n.d(t,l);let d=["",{children:["donate",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,17981)),"C:\\Users\\tsher\\OneDrive\\Desktop\\CTE204\\pet adoption - Copy\\src\\app\\donate\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,27584)),"C:\\Users\\tsher\\OneDrive\\Desktop\\CTE204\\pet adoption - Copy\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,35866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\tsher\\OneDrive\\Desktop\\CTE204\\pet adoption - Copy\\src\\app\\donate\\page.jsx"],c="/donate/page",m={require:n,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/donate/page",pathname:"/donate",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16994:(e,t,n)=>{Promise.resolve().then(n.bind(n,46580))},46580:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(10326),o=n(17577),a=n.n(o),i=n(35047),s=n(77109),l=n(77007),d=n(3544);let u={container:{minHeight:"100vh",padding:"2rem",backgroundColor:"#fce4ec",display:"flex",justifyContent:"center",alignItems:"center"},donationBox:{backgroundColor:"white",padding:"2rem",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",width:"100%",maxWidth:"500px"},title:{color:"#9c60be",textAlign:"center",marginBottom:"2rem",fontSize:"1.8rem"},formGroup:{marginBottom:"1.5rem"},label:{display:"block",marginBottom:"0.5rem",color:"#666",fontSize:"0.9rem"},input:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s"},select:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s"},error:{color:"#e53935",fontSize:"0.875rem",marginTop:"0.25rem",display:"block"},submitError:{color:"#e53935",textAlign:"center",marginBottom:"1rem",padding:"0.5rem",backgroundColor:"#ffebee",borderRadius:"4px"},submitButton:{width:"100%",padding:"0.75rem",backgroundColor:"#9c60be",color:"white",border:"none",borderRadius:"5px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"background-color 0.3s"},otpContainer:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #ddd"},otpInput:{width:"50px",height:"50px",margin:"0 5px",textAlign:"center",fontSize:"1.2rem",border:"1px solid #ddd",borderRadius:"5px",outline:"none"},otpMessage:{textAlign:"center",color:"#666",marginBottom:"1rem"},resendButton:{background:"none",border:"none",color:"#9c60be",cursor:"pointer",textDecoration:"underline",marginTop:"0.5rem"},timer:{color:"#666",fontSize:"0.9rem",textAlign:"center",marginTop:"0.5rem"}},c=()=>{let{data:e,status:t}=(0,s.useSession)(),n=(0,i.useRouter)(),[c,m]=(0,o.useState)({name:"",amount:"",method:"BOB",accountno:""}),[p,x]=(0,o.useState)({}),[h,g]=(0,o.useState)(!1),[b,y]=(0,o.useState)(!1),[j,f]=(0,o.useState)(["","","","","",""]),[v,C]=(0,o.useState)(""),[P,S]=(0,o.useState)(30),[k,T]=(0,o.useState)(!1),O=()=>Math.floor(1e5+9e5*Math.random()).toString(),[B,w]=(0,o.useState)(""),D=(e,t)=>{if(t.length>1||!/^\d*$/.test(t))return;let n=[...j];if(n[e]=t,f(n),t&&e<5){let t=document.querySelector(`input[name=otp-${e+1}]`);t&&t.focus()}};if(a().useEffect(()=>{let e;return b&&P>0?e=setInterval(()=>{S(e=>e-1)},1e3):0===P&&T(!0),()=>clearInterval(e)},[b,P]),"loading"===t)return(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.Z,{}),r.jsx("div",{style:u.container,children:r.jsx("div",{style:u.donationBox,children:r.jsx("h2",{style:u.title,children:"Loading..."})})}),r.jsx(d.Z,{})]});if(!e)return n.push("/auth/login"),null;let E=()=>{let e={};return c.name.trim()||(e.name="Name is required"),c.amount?(isNaN(c.amount)||0>=Number(c.amount))&&(e.amount="Please enter a valid amount"):e.amount="Amount is required",c.accountno.trim()?/^\d{8,}$/.test(c.accountno)||(e.accountno="Please enter a valid account number"):e.accountno="Account number is required",x(e),0===Object.keys(e).length},_=e=>{let{name:t,value:n}=e.target;m(e=>({...e,[t]:n})),p[t]&&x(e=>({...e,[t]:""}))},A=async e=>{if(e.preventDefault(),E()){g(!0);try{let e=O();w(e),y(!0),S(30),T(!1),alert(`Your OTP is: ${e}`)}catch(e){console.error("Error generating OTP:",e),x(e=>({...e,submit:"Failed to process request. Please try again."}))}finally{g(!1)}}};return(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.Z,{}),r.jsx("div",{style:u.container,children:(0,r.jsxs)("div",{style:u.donationBox,children:[r.jsx("h2",{style:u.title,children:"Support Our Shelter"}),(0,r.jsxs)("form",{onSubmit:A,children:[(0,r.jsxs)("div",{style:u.formGroup,children:[r.jsx("label",{htmlFor:"name",style:u.label,children:"Full Name"}),r.jsx("input",{type:"text",id:"name",name:"name",value:c.name,onChange:_,placeholder:"Enter your name",disabled:h,style:u.input}),p.name&&r.jsx("span",{style:u.error,children:p.name})]}),(0,r.jsxs)("div",{style:u.formGroup,children:[r.jsx("label",{htmlFor:"amount",style:u.label,children:"Donation Amount (Nu.)"}),r.jsx("input",{type:"number",id:"amount",name:"amount",value:c.amount,onChange:_,placeholder:"Enter amount",min:"1",disabled:h,style:u.input}),p.amount&&r.jsx("span",{style:u.error,children:p.amount})]}),(0,r.jsxs)("div",{style:u.formGroup,children:[r.jsx("label",{htmlFor:"method",style:u.label,children:"Payment Method"}),(0,r.jsxs)("select",{id:"method",name:"method",value:c.method,onChange:_,disabled:h,style:u.select,children:[r.jsx("option",{value:"wallet",children:"Mobile Wallet"}),r.jsx("option",{value:"card",children:"Credit/Debit Card"}),r.jsx("option",{value:"bank",children:"Bank Transfer"})]})]}),(0,r.jsxs)("div",{style:u.formGroup,children:[r.jsx("label",{htmlFor:"accountno",style:u.label,children:"Account Number"}),r.jsx("input",{type:"text",id:"accountno",name:"accountno",value:c.accountno,onChange:_,placeholder:"Enter Account Number",disabled:h,style:u.input}),p.accountno&&r.jsx("span",{style:u.error,children:p.accountno})]}),b?(0,r.jsxs)("div",{style:u.otpContainer,children:[r.jsx("p",{style:u.otpMessage,children:"Please enter the 6-digit OTP sent to your registered mobile number"}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:j.map((e,t)=>r.jsx("input",{type:"text",name:`otp-${t}`,value:e,onChange:e=>D(t,e.target.value),style:u.otpInput,maxLength:1,autoComplete:"off"},t))}),v&&r.jsx("p",{style:u.error,children:v}),r.jsx("div",{style:u.timer,children:P>0?`Resend OTP in ${P}s`:""}),r.jsx("button",{type:"button",onClick:()=>{if(!k)return;let e=O();w(e),f(["","","","","",""]),C(""),S(30),T(!1),alert(`Your new OTP is: ${e}`)},style:u.resendButton,disabled:!k,children:"Resend OTP"}),r.jsx("button",{type:"button",onClick:()=>{j.join("")===B?(localStorage.setItem("donationDetails",JSON.stringify({name:c.name,amount:c.amount,timestamp:new Date().toISOString()})),n.push("/thank-you")):C("Invalid OTP. Please try again.")},style:{...u.submitButton,marginTop:"1rem"},children:"Verify & Complete Donation"})]}):r.jsx("button",{type:"submit",style:{...u.submitButton,opacity:h?.7:1,cursor:h?"not-allowed":"pointer"},disabled:h,children:h?"Processing...":"Send OTP"}),p.submit&&r.jsx("div",{style:u.submitError,children:p.submit})]})]})}),r.jsx(d.Z,{})]})}},17981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(68570).createProxy)(String.raw`C:\Users\tsher\OneDrive\Desktop\CTE204\pet adoption - Copy\src\app\donate\page.jsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[276,159,137,464],()=>n(75706));module.exports=r})();